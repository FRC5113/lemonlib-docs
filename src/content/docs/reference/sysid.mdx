---

title: MagicSysIdRoutine
description: Magicbot compatible version of WPILIB sysprep routine, designed to be as seemliess as possible

---

## Purpose

This class enables MagicBot components to easily use WPILib's `SysIdRoutine` for system identification.  
It handles timing, state transitions, and safe driving of mechanisms, so you only need to define how to drive your hardware and how to log telemetry.


## How to Use

1. **Add sysid methods to your mechanism:**

```py
def sysid_drive(self, volts: float):
    self.motor.setVoltage(volts)

def sysid_log(self, log: SysIdRoutineLog):
    log.motor("drive").voltage(
        self.motor.getVoltage()
    ).position(
        self.motor.getPosition()
    ).velocity(
        self.motor.getVelocity()
    )
```
2. **Create a high-level component inheriting from MagicSysIdRoutine:**

```py
class SysIdDrive(MagicSysIdRoutine):
    drive: Drive  # Inject your drive subsystem

    def setup(self):
        self.setup_sysid(
            SysIdRoutine.Config(rampRate=0.2, stepVoltage=7.0, timeout=5),
            SysIdRoutine.Mechanism(
                self.drive.sysid_drive,
                self.drive.sysid_log,
                self.drive,
                "Drive"
            )
        )
```
3. In RobotPy, bind sysid routines to triggers or buttons:

## Methods
```py
MagicSysIdRoutine.setup_sysid(config: SysIdRoutine.Config, mechanism: SysIdRoutine.Mechanism) -> None
"""
What it does: Initializes the internal WPILib SysIdRoutine with your voltage control and logging functions.

Parameters: 
    config: A SysIdRoutine.Config object (defines ramp rate, step voltage, timeout, etc.).

    mechanism: A SysIdRoutine.Mechanism object (wraps drive and log methods).

When to use it: Call this in your setup() method after component injection, not in __init__().
"""

MagicSysIdRoutine.quasistatic_forward() -> None
"""
What it does: Starts a test where voltage ramps up slowly in the forward direction.

When to use it: Trigger this when you want to collect quasistatic forward data for feedforward tuning.
"""

MagicSysIdRoutine.quasistatic_reverse() -> None
"""
What it does: Starts a test where voltage ramps up slowly in the reverse direction.

When to use it: Trigger this when collecting quasistatic reverse data for tuning.
"""

MagicSysIdRoutine.dynamic_forward() -> None
"""
What it does: Starts a test applying a constant step voltage forward.

When to use it: Use this to gather dynamic feedforward data (acceleration characterization) in the forward direction.
"""

MagicSysIdRoutine.dynamic_reverse() -> None
"""
What it does: Starts a test applying a constant step voltage reverse.

When to use it: Use this to gather dynamic reverse data (acceleration characterization).
"""

MagicSysIdRoutine.execute() -> None
"""
What it does: Called automatically by MagicBot; handles test timing, voltage application, and telemetry logging.

When to use it: You don't call this manually—MagicBot runs it every cycle.
"""

MagicSysIdRoutine.on_start() -> None
"""
What it does: Internal method to initialize timers and states at the beginning of a test.

When to use it: You shouldn't call this directly—used by execute() internally.
"""

MagicSysIdRoutine.on_end() -> None
"""
What it does: Internal method that stops the test, zeroes voltage, and halts logging.

When to use it: Called internally when the test ends or times out.
"""
```